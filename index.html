<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Ulang Tahun Juju Ayman</title>
    
    <!-- Tailwind CSS CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts for custom typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600;700&family=Dancing+Script&family=Lobster&family=Pacifico&family=Caveat&family=Satisfy&family=Courgette&family=Permanent+Marker&family=Roboto+Slab&family=Fugaz+One&display=swap" rel="stylesheet">

    <style>
        /* A custom font family from Google Fonts for a more elegant look */
        .font-great-vibes {
            font-family: 'Great Vibes', cursive;
        }

        /* Set base styles for the entire page to handle scrolling and fonts */
        html, body {
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Prevent horizontal scrolling on the body */
            height: 100%;
            width: 100%;
            font-family: 'Poppins', sans-serif;
            background-color: #f4f1eb; /* A soft, warm background color */
        }

        /* Styles for the initial cover page, which acts as a splash screen */
        #cover {
            position: fixed; /* Lock the cover's position so it's always at the top of the viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 100; /* Ensures the cover page is on top of everything */
            transition: opacity 0.8s ease-in-out; /* Smooth fade-out effect */
            color: white;
            position: relative; /* Added relative positioning for balloon container */
        }

        /* A semi-transparent overlay to make the text more readable on the background image */
        .cover-overlay {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 1rem 0; /* Smaller vertical padding */
            border-radius: 1rem;
            backdrop-filter: blur(5px);
            /* Applying a simple animation to the overlay */
            animation: pulse 2s infinite ease-in-out;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            /* Reducing vertical gap between elements */
            gap: 0.5rem;
            z-index: 100; /* Ensure this is on top of the large balloon */
        }

        /* CSS Keyframes for the looping pulse animation */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* Main container for the invitation content, designed for vertical scrolling */
        #main-content {
            width: 100%;
            height: 100%;
            overflow-x: hidden; /* Disables horizontal scrolling */
            overflow-y: scroll; /* Enables vertical scrolling */
        }

        /* Each section wrapper occupies the full viewport and handles the snap and fade-in animations */
        .section-wrapper {
            width: 100vw;
            min-height: 100vh; /* Changed from height to min-height to allow vertical scrolling */
            flex-shrink: 0; /* Prevents sections from shrinking */
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            box-sizing: border-box;
            opacity: 0; /* Initial state for the fade-in animation */
            transform: translateY(20px);
            transition: opacity 1s ease-out, transform 1s ease-out; /* Smooth transition for the fade-in effect */
        }
        
        /* The state when the section becomes visible, triggering the fade-in animation */
        .section-wrapper.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Styles for the card-like container within each section */
        .section-card {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            color: #4a4a4a;
            white-space: normal;
            position: relative; /* Make it a positioning context for absolute children */
        }
        
        /* Styles for the countdown timer's individual boxes */
        .countdown-box {
            background: #4a4a4a;
            color: white;
            padding: 1rem;
            border-radius: 0.75rem;
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* General styles for the new buttons and menus on the cover page */
        .floating-btn {
            position: absolute;
            top: 2rem;
            padding: 0.5rem;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border-radius: 9999px;
            cursor: pointer;
            z-index: 101;
        }

        .menu-container {
            position: absolute;
            top: 6rem;
            right: 1.5rem;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            z-index: 102;
            max-height: 70vh;
            overflow-y: auto;
            display: none;
            flex-direction: column;
            gap: 0.5rem;
            text-align: left;
        }

        /* Styles for the guest link generator box */
        #link-box {
            position: fixed; /* Using fixed to always be in the center of the screen */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 110;
            display: none;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        /* Styles for the new guest display box */
        #guest-display-box {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 1.5rem;
            border-radius: 1rem;
            backdrop-filter: blur(10px);
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        /* New styles for the copy button */
        .copy-btn {
            background-color: #4CAF50; /* Green color */
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }

        .copy-btn:hover {
            background-color: #45a049;
        }

        /* Styles for the message box, replacing `alert()` */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            z-index: 2000;
            display: none;
            text-align: center;
            font-size: 1.2rem;
        }
        
        /* New styles for the wishes section */
        .wishes-list {
            max-height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 1rem;
            margin-top: 1rem;
            display: flex;
            flex-direction: column-reverse; /* Newest wishes on top */
        }
        
        .wish-item {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 1rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* --- CSS for the Large Balloon Animation --- */
        .large-balloon {
            position: absolute;
            bottom: -10%; /* Start just below the viewport */
            left: -5%; /* Start slightly to the left */
            width: 500px; /* Adjust size for the large balloon */
            height: auto;
            z-index: 90; /* Place it behind the text overlay */
            pointer-events: none; /* Prevents it from blocking clicks */
            animation: bounceFloat 20s ease-in-out infinite; /* Apply the new animation */
        }

        /* New keyframes for the large balloon's unique movement */
        @keyframes bounceFloat {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(50px, -20px) rotate(5deg);
            }
            50% {
                transform: translate(0, -40px) rotate(0deg);
            }
            75% {
                transform: translate(-50px, -20px) rotate(-5deg);
            }
            100% {
                transform: translate(0, 0) rotate(0deg);
            }
        }

        /* New: CSS for the Flying Pigeon GIF animation */
        .flying-pigeon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -100px); /* Position it above the button */
            width: 150px;
            height: auto;
            z-index: 99; /* Below the overlay but above other elements */
            pointer-events: none;
        }

    </style>
</head>
<body>

    <!-- Cover Page - The first page the user sees -->
    <div id="cover" style="background-image: url('https://raw.githubusercontent.com/qisel/Digitalinvit/main/bg4.jpg');">
        
        <!-- Large Balloon Element with the new image URL -->
        <img src="https://github.com/qisel/Digitalinvit/raw/main/balon.png" alt="Large Balloon" class="large-balloon">

        <!-- New: Flying Pigeon GIF -->
        <img src="https://cdn.dribbble.com/users/180295/screenshots/1156821/flying-pigeon.gif" alt="Pigeon Flying" class="flying-pigeon">

        <!-- New buttons for music, font, link, and background options -->
        <button id="music-btn" class="floating-btn right-2 sm:right-4">
            <!-- Music icon (SVG from Feather Icons) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
            </svg>
        </button>

        <button id="font-btn" class="floating-btn right-12 sm:right-16">
            <!-- Font icon (SVG from Feather Icons) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="4 7 4 4 20 4 20 7"></polyline>
                <line x1="9" y1="20" x2="15" y2="20"></line>
                <line x1="12" y1="4" x2="12" y2="20"></line>
            </svg>
        </button>

        <button id="link-gen-btn" class="floating-btn right-24 sm:right-28">
            <!-- Link icon (SVG from Feather Icons) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
            </svg>
        </button>

        <button id="bg-btn" class="floating-btn right-36 sm:right-40">
            <!-- Background icon (SVG from Feather Icons) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 21.6c-4.4-4.5-8-8.3-8-12.7A8 8 0 1 1 12 2a8 8 0 0 1 8 8c0 4.4-3.6 8.2-8 12.7z"></path>
                <path d="M12 10.2v11.4"></path>
                <circle cx="12" cy="10" r="3"></circle>
                <path d="M12 10.2c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"></path>
            </svg>
        </button>

        <!-- Font selector menu -->
        <div id="font-menu" class="menu-container text-black">
            <h4 class="font-bold text-lg mb-2 text-center text-amber-800">Pilih Font & Warna</h4>
            <!-- Moved color picker to the top -->
            <label for="font-color" class="block mb-2 text-sm text-center">Pilih Warna Font:</label>
            <input type="color" id="font-color" value="#4a4a4a" class="w-full h-8 rounded-lg cursor-pointer mb-4">
            <div id="font-options" class="flex flex-col gap-2">
                <!-- Font buttons will be generated here by JavaScript -->
            </div>
        </div>

        <!-- Background options menu -->
        <div id="bg-menu" class="menu-container text-black">
            <h4 class="font-bold text-lg mb-2 text-center text-amber-800">Pilih Latar Belakang</h4>
            <div class="flex flex-col gap-4">
                <!-- Image Option -->
                <div>
                    <h5 class="font-semibold text-sm mb-1">Gambar Rekomendasi</h5>
                    <div id="bg-image-options" class="grid grid-cols-2 gap-2">
                        <!-- Image buttons will be generated by JavaScript -->
                    </div>
                </div>
                <!-- Solid Color Option -->
                <div>
                    <h5 class="font-semibold text-sm mb-1">Warna Solid</h5>
                    <input type="color" id="bg-solid-color" value="#F4F1EB" class="w-full h-8 rounded-lg cursor-pointer">
                </div>
                <!-- Gradient Option -->
                <div>
                    <h5 class="font-semibold text-sm mb-1">Warna Gradien</h5>
                    <div class="flex flex-col gap-2">
                        <label class="text-xs">Warna Awal:</label>
                        <input type="color" id="bg-grad-color1" value="#FFDD55" class="w-full h-8 rounded-lg cursor-pointer">
                        <label class="text-xs">Warna Akhir:</label>
                        <input type="color" id="bg-grad-color2" value="#FF8800" class="w-full h-8 rounded-lg cursor-pointer">
                        <button id="apply-bg-gradient-btn" class="w-full bg-amber-800 text-white px-4 py-2 rounded-full text-sm hover:bg-amber-900">Terapkan Gradien</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Guest link generator box -->
        <div id="link-box" class="text-black">
            <h4 class="font-bold text-lg mb-4 text-amber-800">Buat Link Tamu</h4>
            <p class="text-sm mb-2">Masukkan nama tamu yang ingin diundang:</p>
            <input type="text" id="guest-name-input" placeholder="Nama Tamu" class="w-full px-4 py-2 mb-4 border rounded-md">
            <button id="generate-link-btn" class="bg-amber-800 text-white px-6 py-2 rounded-full hover:bg-amber-900 transition duration-300 shadow-md">
                Generate Link
            </button>
            <div id="generated-link-area" class="mt-4 w-full">
                <!-- Generated link and copy button will appear here -->
                <input type="text" id="generated-link-input" class="w-full px-4 py-2 mb-2 border rounded-md text-sm" readonly>
                <div class="flex flex-row gap-2 justify-center">
                    <button id="copy-link-btn" class="copy-btn">Salin Link</button>
                    <button id="copy-wa-btn" class="copy-btn">Salin Teks WhatsApp</button>
                </div>
            </div>
            <button id="close-link-box" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>

        <div class="cover-overlay flex-col">
            <p id="cover-title" class="text-xl md:text-2xl">Undangan Syukuran Ulang Tahun</p>
            <h1 id="child-name" class="font-great-vibes text-6xl md:text-9xl my-2">Juju Ayman</h1>
            
            <button id="open-button" class="bg-amber-800 text-white px-8 py-3 rounded-full hover:bg-amber-900 transition duration-300 shadow-lg text-lg">
                Buka Undangan
            </button>

            <!-- New guest greeting box, initially hidden -->
            <div id="guest-display-box" class="hidden text-white mt-2">
                <p class="text-lg md:text-xl">Yang terhormat Bpk/Ibu/Sdr/i</p>
                <p id="guest-name" class="font-bold text-2xl md:text-3xl mt-2"></p>
                <p id="apology-text" class="text-xs opacity-70 mt-2">Mohon maaf jika ada kesalahan penulisan nama / gelar</p>
            </div>
        </div>
    </div>

    <!-- The message box for display messages instead of `alert()` -->
    <div id="message-box" class="message-box"></div>

    <!-- Main Content with Vertical Scrolling -->
    <main id="main-content" class="hidden flex-col">
        <!-- Section 1: Opening Message -->
        <section class="section-wrapper">
            <div class="section-card relative">
                <div class="absolute top-4 left-4 text-4xl transform -rotate-12 animate-bounce">🎈</div>
                <div class="absolute top-4 right-4 text-4xl transform rotate-12 animate-bounce">🎁</div>
                <h2 class="font-great-vibes text-5xl mb-6 text-amber-800">Assalamu'alaikum Wr. Wb.</h2>
                <p class="mb-4">Dengan memohon rahmat dan ridho Allah SWT, kami mengundang Bapak/Ibu/Saudara/i untuk hadir dalam acara syukuran ulang tahun putra kami:</p>
                <h3 class="font-great-vibes text-6xl my-6 text-amber-900">Juju Ayman</h3>
                <p>Kehadiran dan doa restu Anda adalah kebahagiaan bagi kami.</p>
                <div class="absolute bottom-4 left-1/2 -ml-8 text-4xl transform -translate-x-1/2">🎂</div>
            </div>
        </section>

        <!-- Section 2: Prayer & Hope -->
        <section class="section-wrapper">
            <div class="section-card">
                <div class="absolute top-4 right-4 text-4xl transform rotate-12">🕯️</div>
                <div class="absolute bottom-4 left-4 text-4xl transform -rotate-12">🎉</div>
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4 text-amber-800">
                    <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M12.5 15.5c-1.5-1-1.5-3-0-4 1.5-1 1.5-3 0-4"></path>
                    <path d="M8.5 15.5c1.5-1 1.5-3 0-4-1.5-1-1.5-3 0-4"></path>
                </svg>
                <h2 class="text-3xl font-bold mb-4 text-amber-900">Doa & Harapan</h2>
                <p class="text-md italic">"Ya Allah, panjangkanlah umurnya, sehatkanlah jasadnya, terangilah hatinya, tetapkanlah imannya, baikkanlah amalannya, luaskanlah rezekinya, dan jauhkanlah dari keburukan. Aamiin."</p>
            </div>
        </section>

        <!-- Section 3: The hosts of the event -->
        <section class="section-wrapper">
            <div class="section-card">
                <div class="absolute top-4 left-1/2 -ml-8 text-4xl transform -rotate-12">👨‍👩‍👧‍👦</div>
                <div class="absolute bottom-4 right-4 text-4xl transform rotate-12">💖</div>

                <h2 class="font-great-vibes text-5xl mb-6 text-amber-800">Kami yang Berbahagia</h2>
                <p class="text-lg">Keluarga Besar:</p>
                <p class="text-2xl font-bold mt-2">Bapak Rizky R. Harun</p>
                <p class="font-great-vibes text-4xl my-2">&</p>
                <p class="text-2xl font-bold">Ibu Inang Mopangga</p>
            </div>
        </section>

        <!-- Section 4: Event date and countdown timer -->
        <section class="section-wrapper">
            <div class="section-card">
                <h2 class="font-great-vibes text-5xl mb-8 text-amber-800">Save The Date</h2>
                
                <!-- Date highlight block -->
                <div class="bg-amber-800 text-white p-6 rounded-xl inline-block shadow-lg">
                    <p class="text-2xl font-bold">Sabtu</p>
                    <p class="text-6xl font-bold border-y-2 border-white my-2 py-2">23</p>
                    <p class="text-2xl font-bold">Agustus 2025</p>
                </div>
                
                <!-- Countdown timer display -->
                <div id="countdown" class="flex justify-center space-x-2 md:space-x-4 mt-8">
                    <div class="countdown-box">
                        <span id="days" class="text-3xl font-bold">00</span>
                        <span class="text-xs">Hari</span>
                    </div>
                    <div class="countdown-box">
                        <span id="hours" class="text-3xl font-bold">00</span>
                        <span class="text-xs">Jam</span>
                    </div>
                    <div class="countdown-box">
                        <span id="minutes" class="text-3xl font-bold">00</span>
                        <span class="text-xs">Menit</span>
                    </div>
                    <div class="countdown-box">
                        <span id="seconds" class="text-3xl font-bold">00</span>
                        <span class="text-xs">Detik</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Location details and Google Maps -->
        <section class="section-wrapper">
            <div class="section-card">
                <h2 class="font-great-vibes text-5xl mb-6 text-amber-800">Lokasi Acara</h2>
                <p class="text-lg font-semibold">Kediaman Rizky R. Harun bersama Istri</p>
                <p class="mb-6">Kompleks R.O Taluhu Barakati Kec. Batudaa</p>
                
                <!-- Embedded Google Maps iframe -->
                <div class="w-full h-60 rounded-xl overflow-hidden border-4 border-white shadow-lg my-4">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.498077583713!2d124.8422223152643!3d1.484857761406886!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x328774e50889987d%3A0x264d974a6218777!2sManado%2C%20Kota%20Manado%2C%20Sulawesi%20Utara!5e0!3m2!1sid!2sid!4v1661152912345!5m2!1sid!2sid" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
                
                <!-- Link to open the location in Google Maps app -->
                <a href="https://maps.app.goo.gl/UJoYsc5eEwjj43q99" target="_blank" class="inline-block bg-amber-800 text-white px-8 py-3 rounded-full hover:bg-amber-900 transition duration-300 shadow-md">Buka di Google Maps</a>
            </div>
        </section>

        <!-- Section 6: Gift details -->
        <section class="section-wrapper">
            <div class="section-card">
                <h2 class="font-great-vibes text-5xl mb-6 text-amber-800">Kirim Hadiah</h2>
                <p class="mb-6">Doa restu Anda adalah hadiah terindah. Namun, jika ingin memberikan tanda kasih, Anda dapat melakukannya melalui:</p>
                
                <!-- E-wallet and bank account details -->
                <div class="space-y-4 text-left">
                    <div class="bg-gray-100 p-4 rounded-lg flex flex-col items-center">
                        <img src="https://raw.githubusercontent.com/qisel/Digitalinvit/main/ewallet.jpg" alt="E-wallet logos" class="h-16 w-auto mb-2">
                        <p class="font-bold text-center">E-Wallet</p>
                        <p class="text-sm text-center">QRIS (scan barcode di bawah)</p>
                        <img src="https://raw.githubusercontent.com/qisel/Digitalinvit/main/qris.jpg" alt="QRIS barcode" class="w-48 h-auto my-4 rounded-lg shadow-sm">
                        <p class="text-xs text-gray-500">a/n Rizky R. Harun</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg flex flex-col items-center">
                        <img src="https://raw.githubusercontent.com/qisel/Digitalinvit/main/bank.png" alt="Bank logos" class="h-8 w-auto mb-2">
                        <p class="font-bold text-center">Rekening Bank</p>
                        <p class="text-sm">BCA: 5410189xxx</p>
                        <p class="text-xs text-gray-500">a/n Juju Ayman</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 7: Wishes and RSVP -->
        <section class="section-wrapper">
            <div class="section-card">
                <h2 class="font-great-vibes text-5xl mb-6 text-amber-800">Kirim Ucapan & Doa</h2>
                <form id="wishes-form" class="flex flex-col items-stretch">
                    <label for="wisher-name" class="text-left text-sm font-semibold mb-1">Nama Anda:</label>
                    <input type="text" id="wisher-name" placeholder="Nama" class="w-full px-4 py-2 mb-4 border rounded-md">
                    <label for="wish-message" class="text-left text-sm font-semibold mb-1">Ucapan:</label>
                    <textarea id="wish-message" rows="4" placeholder="Ketik ucapan & doa Anda di sini..." class="w-full px-4 py-2 mb-4 border rounded-md resize-none"></textarea>
                    <button type="submit" class="bg-amber-800 text-white px-6 py-2 rounded-full hover:bg-amber-900 transition duration-300 shadow-md">
                        Kirim Ucapan
                    </button>
                </form>
                
                <div id="wishes-list" class="wishes-list">
                    <!-- Wishes will be appended here -->
                </div>
            </div>
        </section>

        <!-- Section 8: Closing statement and Quranic verse -->
        <section class="section-wrapper">
            <div class="section-card">
                <h2 class="font-great-vibes text-5xl mb-6 text-amber-800">Penutup</h2>
                <p class="mb-6">Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa restu.</p>
                <p class="text-sm italic text-gray-600">"Dan di antara tanda-tanda kebesaran-Nya diciptakan-Nya untukmu pasangan hidup dari jenismu sendiri supaya kamu mendapat ketenangan hati dan dijadikan-Nya di antara kamu rasa kasih dan sayang. Sesungguhnya pada yang demikian itu menjadi tanda-tanda kebesaran-Nya bagi kaum yang berpikir."</p>
                <p class="text-xs mt-2 font-bold">(QS. Ar-Rum: 21)</p>
                <p class="font-bold text-xl mt-6 text-amber-900">Wassalamu'alaikum Wr. Wb.</p>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get all the necessary DOM elements
            const cover = document.getElementById('cover');
            const mainContent = document.getElementById('main-content');
            const openButton = document.getElementById('open-button');
            const music = new Audio('https://www.bensound.com/bensound-music/bensound-happy.mp3'); // Use Audio constructor for better control
            music.loop = true;
            const musicBtn = document.getElementById('music-btn');
            const guestDisplayBox = document.getElementById('guest-display-box');
            const guestNameDisplay = document.getElementById('guest-name');
            const apologyText = document.getElementById('apology-text');
            const messageBox = document.getElementById('message-box');
            const linkGenBtn = document.getElementById('link-gen-btn');
            const linkBox = document.getElementById('link-box');
            const closeLinkBoxBtn = document.getElementById('close-link-box');
            const generateLinkBtn = document.getElementById('generate-link-btn');
            const guestNameInput = document.getElementById('guest-name-input');
            const generatedLinkArea = document.getElementById('generated-link-area');
            const generatedLinkInput = document.getElementById('generated-link-input');
            const copyLinkBtn = document.getElementById('copy-link-btn');
            const copyWaBtn = document.getElementById('copy-wa-btn');

            const wishesForm = document.getElementById('wishes-form');
            const wisherNameInput = document.getElementById('wisher-name');
            const wishMessageTextarea = document.getElementById('wish-message');
            const wishesList = document.getElementById('wishes-list');

            // Function to get query parameters from the URL
            function getQueryParam(param) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            }

            // Function to display a message in the message box
            function showMessage(message) {
                messageBox.innerText = message;
                messageBox.style.display = 'block';
                setTimeout(() => {
                    messageBox.style.display = 'none';
                }, 3000);
            }

            // Event listener for the "Buka Undangan" button
            openButton.addEventListener('click', function() {
                // Fade out the cover and show the main content
                cover.style.opacity = '0';
                setTimeout(() => {
                    cover.style.display = 'none';
                    mainContent.style.display = 'flex';
                    // Allow vertical scrolling on the body
                    document.body.style.overflowY = 'scroll';
                    // Start playing the background music, handling potential autoplay block
                    music.play().catch(e => {
                        console.error("Autoplay was prevented:", e);
                        showMessage('Autoplay musik diblokir oleh browser Anda. Silakan klik tombol musik di pojok kanan atas untuk memutar.');
                    });
                }, 800); // Wait for the fade-out transition to complete
            });

            // Set up the music button to toggle play/pause
            let isPlaying = false;
            musicBtn.addEventListener('click', function() {
                if (isPlaying) {
                    music.pause();
                } else {
                    music.play();
                }
                isPlaying = !isPlaying;
            });

            // Get the guest name from the URL and display it
            const guestName = getQueryParam('to');
            if (guestName) {
                guestNameDisplay.textContent = decodeURIComponent(guestName).replace(/\+/g, ' ');
                guestDisplayBox.classList.remove('hidden');
            } else {
                guestDisplayBox.classList.add('hidden');
            }

            // Countdown timer to the event date (August 23, 2025)
            const countdownDate = new Date("Aug 23, 2025 00:00:00").getTime();
            const countdownInterval = setInterval(function() {
                const now = new Date().getTime();
                const distance = countdownDate - now;

                if (distance < 0) {
                    clearInterval(countdownInterval);
                    document.getElementById("countdown").innerHTML = "Acara telah berlangsung!";
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("days").innerText = days.toString().padStart(2, '0');
                document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
                document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
                document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');
            }, 1000);

            // Open/close the link generator box
            linkGenBtn.addEventListener('click', () => linkBox.style.display = 'flex');
            closeLinkBoxBtn.addEventListener('click', () => {
                linkBox.style.display = 'none';
                generatedLinkArea.style.display = 'none';
            });

            // Generate the guest link
            generateLinkBtn.addEventListener('click', function() {
                const name = guestNameInput.value.trim();
                if (name) {
                    const encodedName = encodeURIComponent(name);
                    const currentUrl = window.location.href.split('?')[0]; // Get base URL
                    const newUrl = `${currentUrl}?to=${encodedName}`;
                    
                    generatedLinkInput.value = newUrl;
                    generatedLinkArea.style.display = 'block';
                } else {
                    showMessage('Mohon masukkan nama tamu terlebih dahulu.');
                }
            });

            // --- Copy to Clipboard Script ---
            function copyToClipboard(textToCopy, button) {
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = textToCopy;
                document.body.appendChild(tempTextArea);
                tempTextArea.select();

                try {
                    document.execCommand('copy');
                    button.innerText = 'Tersalin!';
                    setTimeout(() => { 
                        if (button.id === 'copy-link-btn') {
                            button.innerText = 'Salin Link'; 
                        } else if (button.id === 'copy-wa-btn') {
                            button.innerText = 'Salin Teks WhatsApp';
                        }
                    }, 2000);
                    showMessage('Teks berhasil disalin!');
                } catch (err) {
                    console.error('Gagal menyalin teks: ', err);
                    showMessage('Gagal menyalin teks. Silakan coba manual.');
                }
                document.body.removeChild(tempTextArea);
            }

            // Hook up the copy buttons
            copyLinkBtn.addEventListener('click', () => {
                const text = generatedLinkInput.value;
                copyToClipboard(text, copyLinkBtn);
            });

            copyWaBtn.addEventListener('click', () => {
                const guestName = guestNameInput.value.trim();
                const link = generatedLinkInput.value;
                const message = `Halo ${guestName},\n\nAnda diundang untuk menghadiri acara ulang tahun Juju Ayman. Berikut link undangannya:\n\n${link}\n\nTerima kasih.`;
                copyToClipboard(message, copyWaBtn);
            });
            
            // Handle wishes form submission
            wishesForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const name = wisherNameInput.value.trim();
                const message = wishMessageTextarea.value.trim();

                if (name && message) {
                    // Create a new wish element
                    const newWish = document.createElement('div');
                    newWish.className = 'wish-item';
                    newWish.innerHTML = `<p class="font-bold text-amber-800">${name}</p><p class="mt-1 text-sm">${message}</p>`;
                    
                    // Append the new wish to the list
                    wishesList.prepend(newWish); // Use prepend to add new wish on top
                    
                    // Clear the form fields
                    wisherNameInput.value = '';
                    wishMessageTextarea.value = '';
                    
                    showMessage('Ucapan Anda berhasil dikirim!');
                    
                    // In a real application, you would send this data to a database here
                    // For example, using Firestore:
                    // db.collection('wishes').add({ name, message, timestamp: firebase.firestore.FieldValue.serverTimestamp() });
                } else {
                    showMessage('Nama dan ucapan tidak boleh kosong.');
                }
            });

            // Intersection Observer for scroll animations (fade-in effect)
            const sections = document.querySelectorAll('.section-wrapper');
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.2 // Trigger when 20% of the element is visible
            });

            // Start observing all sections
            sections.forEach(section => {
                observer.observe(section);
            });

        });
    </script>
</body>
</html>
